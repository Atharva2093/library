'use client';

import React, { useState } from 'react';
import { 
  ExportButton, 
  QuickExportButton, 
  DateRangeExportForm 
} from '@/components/ui/ExportComponents';
import { 
  StatCard, 
  SimpleBarChart, 
  SimplePieChart, 
  ProgressBar, 
  MetricTable, 
  TrendLine 
} from '@/components/ui/DataVisualization';

const ExportDemoPage = () => {
  const [activeDemo, setActiveDemo] = useState<'components' | 'visualization' | 'integration'>('components');

  // Sample data for demonstrations
  const sampleChartData = [
    { label: 'Fiction', value: 45, color: 'bg-blue-500' },
    { label: 'Non-Fiction', value: 32, color: 'bg-green-500' },
    { label: 'Science', value: 23, color: 'bg-yellow-500' },
    { label: 'History', value: 18, color: 'bg-red-500' },
    { label: 'Biography', value: 12, color: 'bg-purple-500' },
  ];

  const sampleTrendData = [
    { label: 'Jan', value: 12500 },
    { label: 'Feb', value: 13200 },
    { label: 'Mar', value: 11800 },
    { label: 'Apr', value: 14100 },
    { label: 'May', value: 15600 },
    { label: 'Jun', value: 13900 },
  ];

  const sampleMetrics = [
    { label: 'Revenue per Customer', value: '$94.26', change: { value: 5.8, type: 'increase' as const } },
    { label: 'Average Order Value', value: '$45.32', change: { value: 2.1, type: 'increase' as const } },
    { label: 'Customer Retention', value: '78.5%', change: { value: 1.2, type: 'decrease' as const } },
  ];

  const demos = [
    {
      id: 'components',
      name: 'Export Components',
      description: 'Reusable export buttons and forms'
    },
    {
      id: 'visualization',
      name: 'Data Visualization',
      description: 'Charts and visual components'
    },
    {
      id: 'integration',
      name: 'Integration Examples',
      description: 'Real-world usage patterns'
    }
  ];

  return (
    <div className="min-h-screen bg-gray-50 py-8">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-8">
          <h1 className="text-3xl font-bold text-gray-900">Export & Reporting System Demo</h1>
          <p className="mt-2 text-gray-600">
            Comprehensive demonstration of data export and visualization capabilities
          </p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
          {/* Demo Navigation */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-lg shadow p-6">
              <h2 className="text-lg font-medium text-gray-900 mb-4">Demo Sections</h2>
              <nav className="space-y-2">
                {demos.map((demo) => (
                  <button
                    key={demo.id}
                    onClick={() => setActiveDemo(demo.id as any)}
                    className={`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                      activeDemo === demo.id
                        ? 'bg-green-100 text-green-700 border-l-4 border-green-500'
                        : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'
                    }`}
                  >
                    <div>
                      <div className="font-medium">{demo.name}</div>
                      <div className="text-xs text-gray-500">{demo.description}</div>
                    </div>
                  </button>
                ))}
              </nav>
            </div>

            <div className="bg-white rounded-lg shadow p-6 mt-6">
              <h3 className="text-lg font-medium text-gray-900 mb-4">Features Covered</h3>
              <ul className="space-y-2 text-sm text-gray-600">
                <li className="flex items-center">
                  <span className="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                  Multiple export formats
                </li>
                <li className="flex items-center">
                  <span className="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                  Date range filtering
                </li>
                <li className="flex items-center">
                  <span className="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                  Visual data representation
                </li>
                <li className="flex items-center">
                  <span className="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                  Customizable reports
                </li>
                <li className="flex items-center">
                  <span className="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                  Real-time statistics
                </li>
                <li className="flex items-center">
                  <span className="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                  Responsive design
                </li>
              </ul>
            </div>
          </div>

          {/* Demo Content */}
          <div className="lg:col-span-3 space-y-6">
            {/* Export Components Demo */}
            {activeDemo === 'components' && (
              <>
                <div className="bg-white rounded-lg shadow p-6">
                  <h3 className="text-xl font-semibold text-gray-900 mb-4">Export Button Components</h3>
                  
                  <div className="space-y-6">
                    <div>
                      <h4 className="text-lg font-medium text-gray-900 mb-3">Standard Export Buttons</h4>
                      <p className="text-sm text-gray-600 mb-4">
                        Dropdown export buttons with multiple format options
                      </p>
                      <div className="flex flex-wrap gap-3">
                        <ExportButton
                          reportType="sales"
                          label="Export Sales"
                        />
                        <ExportButton
                          reportType="inventory"
                          label="Export Inventory"
                        />
                        <ExportButton
                          reportType="customers"
                          label="Export Customers"
                        />
                        <ExportButton
                          reportType="financial"
                          label="Financial Summary"
                        />
                      </div>
                    </div>

                    <div>
                      <h4 className="text-lg font-medium text-gray-900 mb-3">Quick Export Buttons</h4>
                      <p className="text-sm text-gray-600 mb-4">
                        Single-format export buttons for common actions
                      </p>
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <QuickExportButton
                          reportType="sales"
                          format="csv"
                          label="Sales CSV"
                          variant="primary"
                        />
                        <QuickExportButton
                          reportType="inventory"
                          format="excel"
                          label="Inventory Excel"
                          variant="secondary"
                        />
                        <QuickExportButton
                          reportType="customers"
                          format="json"
                          label="Customers JSON"
                          variant="outline"
                        />
                        <QuickExportButton
                          reportType="financial"
                          format="pdf"
                          label="Financial PDF"
                          variant="primary"
                        />
                      </div>
                    </div>

                    <div>
                      <h4 className="text-lg font-medium text-gray-900 mb-3">Date Range Export Form</h4>
                      <p className="text-sm text-gray-600 mb-4">
                        Advanced export form with date filtering and custom options
                      </p>
                      <DateRangeExportForm
                        reportType="sales"
                      />
                    </div>
                  </div>
                </div>
              </>
            )}

            {/* Visualization Demo */}
            {activeDemo === 'visualization' && (
              <>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <StatCard
                    title="Total Revenue"
                    value="$15,450.75"
                    change={{ value: 12.5, type: 'increase', timeframe: 'last month' }}
                    color="green"
                    icon={
                      <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z" />
                        <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clipRule="evenodd" />
                      </svg>
                    }
                  />
                  <StatCard
                    title="Total Orders"
                    value="189"
                    change={{ value: 8.3, type: 'increase', timeframe: 'last month' }}
                    color="blue"
                    icon={
                      <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fillRule="evenodd" d="M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM8.5 13a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z" clipRule="evenodd" />
                      </svg>
                    }
                  />
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                  <SimpleBarChart
                    data={sampleChartData}
                    title="Sales by Category"
                  />
                  <SimplePieChart
                    data={sampleChartData}
                    title="Revenue Distribution"
                  />
                </div>

                <div className="bg-white p-6 rounded-lg shadow">
                  <h4 className="text-lg font-medium text-gray-900 mb-4">Progress Indicators</h4>
                  <div className="space-y-4">
                    <ProgressBar
                      label="Sales Target"
                      current={15450}
                      total={20000}
                      color="green"
                    />
                    <ProgressBar
                      label="Inventory Turnover"
                      current={78}
                      total={100}
                      color="blue"
                    />
                    <ProgressBar
                      label="Customer Satisfaction"
                      current={94}
                      total={100}
                      color="purple"
                    />
                  </div>
                </div>

                <TrendLine
                  data={sampleTrendData}
                  title="Monthly Revenue Trend"
                  color="green"
                />

                <MetricTable
                  data={sampleMetrics}
                  title="Key Performance Indicators"
                />
              </>
            )}

            {/* Integration Demo */}
            {activeDemo === 'integration' && (
              <>
                <div className="bg-white rounded-lg shadow p-6">
                  <h3 className="text-xl font-semibold text-gray-900 mb-4">Integration Patterns</h3>
                  
                  <div className="space-y-6">
                    <div>
                      <h4 className="text-lg font-medium text-gray-900 mb-3">Dashboard Integration</h4>
                      <p className="text-sm text-gray-600 mb-4">
                        Example of how export buttons integrate with dashboard pages
                      </p>
                      <div className="bg-gray-50 rounded-lg p-4">
                        <div className="flex items-center justify-between mb-4">
                          <div>
                            <h5 className="font-medium text-gray-900">Sales Dashboard</h5>
                            <p className="text-sm text-gray-600">Track sales performance and export data</p>
                          </div>
                          <div className="flex space-x-2">
                            <QuickExportButton
                              reportType="sales"
                              format="csv"
                              label="Export CSV"
                              variant="outline"
                            />
                            <ExportButton
                              reportType="sales"
                              label="Export All Formats"
                            />
                          </div>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                          <StatCard
                            title="Today's Sales"
                            value="$1,245"
                            color="green"
                          />
                          <StatCard
                            title="Orders"
                            value="23"
                            color="blue"
                          />
                          <StatCard
                            title="Customers"
                            value="18"
                            color="purple"
                          />
                        </div>
                      </div>
                    </div>

                    <div>
                      <h4 className="text-lg font-medium text-gray-900 mb-3">Report Settings Integration</h4>
                      <p className="text-sm text-gray-600 mb-4">
                        Configure export preferences and automated reporting
                      </p>
                      <div className="bg-gray-50 rounded-lg p-4">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                              Default Export Format
                            </label>
                            <select className="block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm">
                              <option>CSV</option>
                              <option>Excel</option>
                              <option>PDF</option>
                              <option>JSON</option>
                            </select>
                          </div>
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                              Schedule Reports
                            </label>
                            <select className="block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm">
                              <option>Manual Only</option>
                              <option>Daily</option>
                              <option>Weekly</option>
                              <option>Monthly</option>
                            </select>
                          </div>
                        </div>
                        <div className="mt-4 flex items-center">
                          <input
                            type="checkbox"
                            className="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"
                          />
                          <label className="ml-2 text-sm text-gray-900">
                            Include column headers in exports
                          </label>
                        </div>
                      </div>
                    </div>

                    <div>
                      <h4 className="text-lg font-medium text-gray-900 mb-3">Custom Report Builder</h4>
                      <p className="text-sm text-gray-600 mb-4">
                        Advanced date range and filter options for custom reports
                      </p>
                      <div className="bg-gray-50 rounded-lg p-4">
                        <DateRangeExportForm
                          reportType="sales"
                        />
                      </div>
                    </div>

                    <div>
                      <h4 className="text-lg font-medium text-gray-900 mb-3">API Integration Example</h4>
                      <p className="text-sm text-gray-600 mb-4">
                        Code example showing how to use the export service
                      </p>
                      <div className="bg-gray-900 text-green-400 p-4 rounded-lg text-sm font-mono">
                        <pre>{`import { exportService } from '@/lib/services';

// Export sales data as CSV
await exportService.generateSalesReport({
  format: 'csv',
  dateRange: { start: '2025-11-01', end: '2025-11-15' },
  filename: 'sales-report-november'
});

// Export inventory with custom filters
await exportService.generateInventoryReport({
  format: 'excel',
  filters: { category: 'fiction', lowStock: true }
});</pre>
                      </div>
                    </div>
                  </div>
                </div>
              </>
            )}
          </div>
        </div>

        <div className="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
          <div className="flex">
            <div className="flex-shrink-0">
              <svg className="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
              </svg>
            </div>
            <div className="ml-3">
              <h3 className="text-sm font-medium text-blue-800">
                Interactive Demo
              </h3>
              <div className="mt-2 text-sm text-blue-700">
                <p>
                  This is a fully interactive demonstration. All export buttons will generate and download actual files
                  with sample data. The visualization components are responsive and update in real-time. 
                  Try different export formats and date ranges to see the system in action.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ExportDemoPage;